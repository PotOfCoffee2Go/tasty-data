JSON output:
::box::<span>
  ::#radioOff::<input type="radio" name="jsonout" checked>
  <label for="radioOff">Off</label>
  ::#radioNasdaq::<input type="radio" name="jsonout">
  <label for="radioNasdaq">Nasdaq</label>
  ::#radioTasty::<input type="radio" name="jsonout">
  <label for="radioTasty">Tastyworks</label>
  ::#radioMerge::<input type="radio" name="jsonout">
  <label for="radioMerge">Merge</label>
</span>

<pre>::code #jsonOutput hljs language-json hidden::</pre>

<script>
  const show = (elem) => elem.classList.remove('hidden'),
    hide = (elem) => elem.classList.add('hidden');

  // JSON output radio buttons
  document.querySelectorAll("input[name='jsonout']").forEach((input) => {
    input.addEventListener('change', (event) => {
      jsonDisplay(event.target.id);
    });
  });

  jsonDisplay = (id) => {
    id = id || document.querySelector('input[name="jsonout"]:checked').id;
    switch (id) {
      case 'radioNasdaq' :
        jsonOutput.innerHTML =
          JSON.stringify(webdocdown.data.store.nasdaqPortfolioDetails, null, 2);
        hljs.highlightElement(jsonOutput);
        show(jsonOutput);
        break;
      case 'radioTasty' :
        jsonOutput.innerHTML =
          JSON.stringify(webdocdown.data.store.tastyPortfolioDetails, null, 2);
        hljs.highlightElement(jsonOutput);
        show(jsonOutput);
        break;
      case 'radioMerge' :
        let data = [];
        // Merge Nasdaq and Tastyworks portfolio data by symbol
        try {
          let ndata = webdocdown.data.store.nasdaqPortfolioDetails.data.filter(obj => obj.Ticker);
          let tdata = webdocdown.data.store.tastyPortfolioDetails.data;
          data = tdata.map(t1 => ({...t1, ...ndata.find(n2 => n2.Ticker === t1.Underlying_Symbol)}))
        } catch(e) {}

        jsonOutput.innerHTML = JSON.stringify({data}, null, 2);
        hljs.highlightElement(jsonOutput);
        show(jsonOutput);
        break;
      default :
        hide(jsonOutput);
        break;
    }
    location.href = '#tastyText';
  }
</script>
