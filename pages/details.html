::heading::<div>
# _Portfolio Playground_

::tx-.8::_by {{name}}_

_Display portfolio data_
</div>


::clear div::

<button onclick="window.location.href = '?doc=pages/loaddata.html';">Enter data</button>
</div>

::div #detail-data tx-darkblue::

::include-pages/details.html::

<script>
  let detailMarkup = '' +
    '| Symbol | Ticker | ::tx-green::_Shares_ | Entry | Mark | Cost | Holding | Gain |\n' +
    '| :----- | :----: | :------------------: | :---: | :--: | :--: | :-----: | :--: |\n' +
    '{{#data}}' +
    '| {{Underlying_Symbol}} | {{Ticker}} | {{Quantity}} | {{Entry_Price}} |' +
    ' {{Price}} | {{Cost}} | {{Holding_Value}} | {{Gain_Formatted}} |\n' +
    '{{/data}}';

  // Reference portfolio data in localStorage
  let ndata = webdocdown.data.store.nasdaqPortfolioDetails.data.filter(obj => obj.Ticker);
  let tdata = webdocdown.data.store.tastyPortfolioDetails.data;

  // Merge Nasdaq and Tastyworks portfolio data by symbol
  let data = tdata.map(t1 => ({...t1, ...ndata.find(n2 => n2.Ticker === t1.Underlying_Symbol)}))

  // Sort by symbol
  data.sort((a, b) => (a.Ticker > b.Ticker ? 1 : -1));

  // Produce and display table of portfolio data
  webdocdown.produceWBDD(detailMarkup, { data })
    .then((html) => document.getElementById('detail-data').innerHTML = html)
</script>

<style>
  #detail-data table, #detail-data th, #detail-data td {
    padding: 4px;
    border: 1px solid black;
    border-collapse: collapse;
  }
  #detail-data table {
    margin-left:auto;
    margin-right:auto;
  }
  #detail-data th {
    color: darkred;
  }
  pre {
    border-radius: 15px;
    white-space: pre-wrap;
  }
</style>

::plugin-plugins/common.html::
